RaspberryPi.txt
http://www.instructables.com/class/Raspberry-Pi-Class/

On PC (Windows 10)
https://www.raspberrypi.org/learning/software-guide/
download noobs.zip from
https://www.raspberrypi.org/learning/software-guide/quickstart/
https://www.raspberrypi.org/downloads/noobs/
and extract 
SD Formatter
https://www.sdcard.org/downloads/formatter_4/
format sd drive (put it in the sd drive adapter and in top right front of the computer drive F:
transfer all extacted folders and files to the sd drive
right click eject the F: drive
https://www.raspberrypi.org/help/videos/#noobs-setup

insert the sd drive in the Raspberry Pi
turn on, click the obvious: Install Raspbian, English US, and eventually it will Reboot
Do NOT chose wi-fi on the install window
-- It will try to install over the web and offer more OS options than you want

After install, for wi-fi click || in upper right and turn on Wi-Fi
choose YourRouterName from the list and enter the key
if the menu doesn't come up, wait, or click files, click wi-fi again
to set time: terminal > sudo raspi-config > Localization
to shut down: menu > shutdown after quiet (5 seconds) power off (unplug power)

ftp to raspberry pi 
https://www.raspberrypi.org/documentation/remote-access/ftp.md
from the terminal:
sudo apt-get update
sudo apt-get install pure-ftpd
reboot

on the PC:
Core FTP LE > Site Manager
http://www.coreftp.com/download.html (Link: 64 bit free)
Site Name: RaspberryPi
Host: 192.168.1.xxx
where xxx is the number you read when you hover over the Wi-Fi image on Raspberry Pi
Username: pi
Password: raspberry
Port: 21
Timeout: 60
Retries: 2
Connection: FTP

for SFTP
Raspi-config 
Interfacing Options > SSH
with SSH enabled it will complain if password is raspberry
Change User Password (Remember it !!)
reboot

after SSH change on Raspberry Pi
on the PC:
Core FTP LE > Site Manager
http://www.coreftp.com/download.html (Link: 64 bit free)
Site Name: RaspberryPi
Host: 192.168.1.xxx 
where xxx is the number you read when you hover over the Wi-Fi image on Raspberry Pi
Username: pi
Password: New password (Did you Remember it?)
Port: 22
Timeout: 60
Retries: 2
Connection: SSH/SFTP


Install Camera
Power off 
install camera
https://picamera.readthedocs.io/en/release-1.13/install.html
sudo apt-get update
sudo apt-get upgrade
sudo raspi-config
select interfacing options > pi camera
reboot
If you need to rotate 180 degrees
sudo nano /boot/config.txt
lcd_rotate=2 # <-- doesn't work 
camera.rotate = 180 # try this


install digital mic -- Samson Go Mic
Not much from I2S MEMS below 
power down and install the hardware, power up
from the terminal
Check HTMI Speakers
# uncomment to force a HDMI mode rather than DVI. This can make audio work in
# DMT (computer monitor) modes
hdmi_drive=2
sudo raspi-config > Advanced Options > Audio > Force HDMI
check Web > NPR > 5 Minute news

find out the card number with arecord -l 
pi@raspberrypi:~ $ arecord -l
**** List of CAPTURE Hardware Devices ****
card 1: GoMic [Samson GoMic], device 0: USB Audio [USB Audio]
  Subdevices: 1/1
  Subdevice #0: subdevice #0

Enter that number X after plugwh:X
arecord -D plughw:1 -c1 -r 44100 -f S16_LE -t wav -d 10 -V mono -v file.wav
and play it back with
aplay file.wav

Run RecordMic.py

the following list from RecordMic.py doesn't match the above plughw but it works
CHUNK = 4096, CHANNELS = 1, RATE = 44100, input_device_index = 2,

I attempted to re-order the card but didn't have to
https://raspberrypi.stackexchange.com/questions/38161/how-to-reorder-the-index-for-mic-on-new-raspbian-jessie-for-pocketsphinx
currently pyAudio shows
(0, 'bcm2835 ALSA: - (hw:0,0)', 0)
(1, 'bcm2835 ALSA: IEC958/HDMI (hw:0,1)', 0)
(2, 'Samson GoMic: USB Audio (hw:1,0)', 2)
(3, 'sysdefault', 0)
(4, 'front', 0)
(5, 'usb', 2)
(6, 'default', 0)
(7, 'dmix', 0)


arecord -D dmic_sv -c2 -r 44100 -f S32_LE -t wav -V mono -v file.wav
ctrl+C to break
Now you can run alsamixer - press F6 and select the I2S simple sound card
F5 change volume
record with software volume modified - NOTE: -c2 required or error
arecord -D dmic_sv -c2 -r 44100 -f S32_LE -d 10 -t wav -V mono -v recording.wav
-d, --duration=#        interrupt after # seconds
point aplay output to HDMI
amixer cset numid=3 2 # force HDMI output
volume control in upper right
aplay test1.wav


Install I2C
https://learn.adafruit.com/adafruits-raspberry-pi-lesson-4-gpio-setup/configuring-i2c
sudo apt-get install -y python-smbus
sudo apt-get install -y i2c-tools
sudo raspi-config
Interfacing Options > I2C > Enable > Yes > Finish
sudo reboot

verify:
sudo nano /etc/modules
i2c-bcm2708
i2c-dev
sudo nano /etc/modprobe.d/raspi-blacklist.conf
comment out with # if they exist
blacklist spi-bcm2708
blacklist i2c-bcm2708

sudo nano /boot/config.txt 
and add the text
dtparam=i2c1=on
dtparam=i2c_arm=on
save the file with Control-X Y <return>

sudo reboot

sudo i2cdetect -y 1

Install pysftp
pi@raspberrypi:~ $ sudo pip3 install pysftp
It will fail on missing host key so run manually
to get the host key.
pi@raspberrypi:~ $ sftp u45596567-OilGas-1@home208845805.1and1-data.host
The authenticity of host 'home208845805.1and1-data.host (2607:f1c0:1000:10e8:5e68:d92e:882d:17)' can't be established.
ECDSA key fingerprint is SHA256:J4oM+B2g7zZWAI3DolXR1e4vdIMrGO301kEN14/slsQ.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'home208845805.1and1-data.host,2607:f1c0:1000:10e8:5e68:d92e:882d:17' (ECDSA) to the list of known hosts.
u45596567-OilGas-1@home208845805.1and1-data.host's password: Gerard_M1

one more time
pi@raspberrypi:~ $ sftp u45596567-OilGas-1@home208845805.1and1-data.host
u45596567-OilGas-1@home208845805.1and1-data.host's password: Gerard_M1
Connected to home208845805.1and1-data.host.

Now you can run scanfile.py and pysftp will know where the host key is.


memory check
pi@raspberrypi:~ $ df -h


Install PM25
set baud rate from the terminal:
documentation: man stty
pi@raspberrypi:~ $ stty -F /dev/serial0 9600
pi@raspberrypi:~ $ ls -l /dev/serial0
lrwxrwxrwx 1 root root 5 Mar 27 18:07 /dev/serial0 -> ttyS0

so this line should work
pi@raspberrypi:~ $ stty -F /dev/ttyS0 9600

pi@raspberrypi:~ $ ls -l /dev/ttyS0
crw-rw---- 1 root dialout 4, 64 Mar 27 18:07 /dev/ttyS0


https://www.raspberrypi.org/forums/viewtopic.php?t=120926&start=50
https://www.rigacci.org/wiki/doku.php/doc/appunti/hardware/raspberrypi_air
https://www.rigacci.org/wiki/doku.php/doc/appunti/hardware/raspberrypi_air#components_and_connections

PM25 -- GPIO
VCC -- 5V0
GND -- GND
RXD 3.3v logic -- TXD
TXD 3.3v logic -- RXD

raspi-config > Interfacing Options > 
	Serial Disable Serial Login Shell
	Enable Serial Port

apt-get install python-dev python-requests python-smbus python-serial python-tz
tools?
apt-get install dselect dump mc minicom nmap screen setserial sniffit tcpdump vim

Serial Line

Setting the serial line via raspi-config as exposed above should suffice, 
for more info see More on Serial Line (Manual Setup). 
The kernel will expose the serial line at bootstrap using the device 
/dev/ttyAMA0 (Raspberry Pi 2) or 
/dev/serial0 (Raspberry Pi 3). 
?? Read the kernel messages using the dmesg command.


sudo nano /boot/config.txt
enable_uart=1

setserial -a /dev/ttyS0

run testPM25.py

